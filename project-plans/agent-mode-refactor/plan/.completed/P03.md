# Phase 03: MCP Registry Install - Evidence

## Date: 2025-01-28

## Changes Made

Implemented `McpRegistryServiceImpl.install()` to actually install MCPs from the registry.

Previously:
```rust
async fn install(&self, name: &str, _config_name: Option<String>) -> ServiceResult<()> {
    let details = self.get_details(name).await?...;
    // TODO: Add the server configuration to the MCP service
    // For now, this is a stub
    let _ = details;
    Ok(())
}
```

Now:
- Finds MCP in cached registry data
- Uses `McpRegistry::entry_to_config()` to convert to proper `McpConfig`
- Loads app config from disk
- Adds MCP config to `config.mcps`
- Saves config to disk
- Reloads MCP service to activate new MCP

## Verification Results

### Check 1: No TODO/stub in install
```bash
$ grep -A30 "async fn install" src/services/mcp_registry_impl.rs | grep -E "TODO|stub|let _ ="
(no output)
```
Result: PASS (no stubs)

### Check 2: Install does real work
```bash
$ grep -n "entry_to_config\|config.mcps.push\|mcp.reload" src/services/mcp_registry_impl.rs
277:        // Convert to the registry module's wrapper type and use entry_to_config
282:        let mut mcp_config = McpRegistry::entry_to_config(&registry_wrapper)
306:        config.mcps.push(mcp_config);
315:        mcp.reload().await
```
Result: PASS (converts config, adds to config, reloads service)

### Check 3: Build passes
```bash
$ cargo build --all-targets 2>&1 | tail -3
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 14.96s
```
Result: PASS

## Summary

`McpRegistryServiceImpl.install()` now:
1. Looks up MCP in registry cache
2. Converts to `McpConfig` using existing `McpRegistry::entry_to_config()`
3. Adds to app config and saves to disk
4. Reloads MCP service to activate

The stub `let _ = details; Ok(())` has been replaced with real implementation.

## Verdict

**PASS**
